<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For Ayathma üíï | Valentine's Day 2026</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;500;600&family=Playfair+Display:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
  
  <script type="module" async src="https://static.rocket.new/rocket-web.js?_cfg=https%3A%2F%2Fvalentine4364back.builtwithrocket.new&_be=https%3A%2F%2Fappanalytics.rocket.new&_v=0.1.17"></script>
  <script type="module" defer src="https://static.rocket.new/rocket-shot.js?v=0.0.2"></script>
  </head>
<body class="overflow-x-hidden">
    
    <!-- Audio Player with Controls -->
    <div id="audio-controls" class="audio-controls">
        <button id="mute-toggle" class="audio-btn" title="Mute/Unmute">
            <svg id="volume-icon" width="24" height="24" viewBox="0 0 24 24" fill="white">
                <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>
            </svg>
        </button>
        <input type="range" id="volume-slider" class="volume-slider" min="0" max="100" value="50" title="Volume">
        <span id="volume-percentage" class="volume-text">50%</span>
    </div>

    <!-- Hidden Audio Element -->
    <audio id="background-music" loop>
        <source src="music/get.mp3" type="audio/mpeg">
    </audio>
    
    <!-- Scene 1: Night Sky with Floating Hearts -->
    <section id="heart-journey-scene" class="scene active">
        <!-- Star Field Background -->
        <div class="star-field">
            <!-- Stars generated by JavaScript -->
        </div>

        <!-- Floating Hearts Container -->
        <div id="floating-hearts-container" class="floating-hearts-container">
            <!-- Hearts generated by JavaScript -->
        </div>
    </section>

    <!-- Scene 2: Question with Buttons -->
    <section id="question-scene" class="scene">
        <!-- Star Field Background (continues) -->
        <div class="star-field">
            <!-- Stars persist across scenes -->
        </div>

        <div class="question-container">
            <div class="heart-icon-large">
                <svg width="120" height="120" viewBox="0 0 60 60">
                    <path d="M30 52 C10 38, 4 26, 4 18 C4 8, 12 2, 20 2 C24 2, 28 4, 30 8 C32 4, 36 2, 40 2 C48 2, 56 8, 56 18 C56 26, 50 38, 30 52 Z" 
                          fill="#FF6B9D" class="heart-beat"/>
                </svg>
            </div>
            
            <h1 class="question-text">
                Ayathma,<br>
                <span class="italic-text">will you be my Valentine?</span>
            </h1>

            <div class="button-container">
                <button id="yes-button" class="btn btn-yes">
                    Yes! üíï
                </button>
                <button id="no-button" class="btn btn-no">
                    No
                </button>
            </div>

            <p class="hint-text">Try clicking "No" if you dare... üòè</p>
        </div>
    </section>

    <!-- Scene 3: Couple by Bonfire (Lofi Illustration) -->
    <section id="reveal-scene" class="scene">
        <div class="bonfire-scene">
            <!-- Starry Sky (top portion) -->
            <div class="sky-portion">
                <div class="star-field">
                    <!-- Stars in sky -->
                </div>
            </div>

            <!-- Ground with Couple and Bonfire -->
            <div class="ground-portion">
                <!-- Bonfire (SVG) -->
                <div class="bonfire">
                    <svg width="200" height="200" viewBox="0 0 200 200">
                        <!-- Logs -->
                        <rect x="60" y="140" width="80" height="15" fill="#5C4033" rx="3"/>
                        <rect x="50" y="155" width="100" height="15" fill="#4A3428" rx="3"/>
                        <rect x="70" y="125" width="60" height="15" fill="#6B4E3D" rx="3" transform="rotate(-15 100 132)"/>
                        
                        <!-- Fire (animated) -->
                        <path d="M100 130 Q90 100, 100 70 Q110 100, 100 130 Z" fill="#FF6B35" class="flame-flicker" opacity="0.9"/>
                        <path d="M100 120 Q95 100, 100 80 Q105 100, 100 120 Z" fill="#FFD93D" class="flame-flicker-delay" opacity="0.8"/>
                        <path d="M100 110 Q97 95, 100 85 Q103 95, 100 110 Z" fill="#FFF5E1" class="flame-flicker-fast"/>
                    </svg>
                </div>

                <!-- Couple Silhouettes (Lofi style) -->
                <div class="couple">
                    <!-- Person 1 (left - guy) -->
                    <svg width="100" height="150" viewBox="0 0 100 150" class="person-left">
                        <!-- Head -->
                        <circle cx="50" cy="30" r="18" fill="#2D2D2A"/>
                        <!-- Body -->
                        <rect x="38" y="48" width="24" height="40" fill="#4A5568" rx="5"/>
                        <!-- Arms -->
                        <rect x="25" y="55" width="12" height="30" fill="#4A5568" rx="4" transform="rotate(-20 31 70)"/>
                        <rect x="63" y="55" width="12" height="30" fill="#4A5568" rx="4" transform="rotate(20 69 70)"/>
                        <!-- Legs -->
                        <rect x="40" y="88" width="10" height="45" fill="#2C3E50" rx="3"/>
                        <rect x="50" y="88" width="10" height="45" fill="#2C3E50" rx="3"/>
                    </svg>

                    <!-- Person 2 (right - girl) -->
                    <svg width="100" height="150" viewBox="0 0 100 150" class="person-right">
                        <!-- Head -->
                        <circle cx="50" cy="30" r="18" fill="#3E2723"/>
                        <!-- Hair (ponytail) -->
                        <ellipse cx="50" cy="28" rx="20" ry="15" fill="#3E2723"/>
                        <ellipse cx="30" cy="35" rx="8" ry="12" fill="#3E2723"/>
                        <!-- Body -->
                        <rect x="38" y="48" width="24" height="40" fill="#E91E63" rx="5"/>
                        <!-- Arms -->
                        <rect x="25" y="55" width="12" height="30" fill="#E91E63" rx="4" transform="rotate(-15 31 70)"/>
                        <rect x="63" y="55" width="12" height="30" fill="#E91E63" rx="4" transform="rotate(15 69 70)"/>
                        <!-- Legs -->
                        <rect x="40" y="88" width="10" height="45" fill="#4A148C" rx="3"/>
                        <rect x="50" y="88" width="10" height="45" fill="#4A148C" rx="3"/>
                    </svg>
                </div>

                <!-- Success Message -->
                <div class="success-message">
                    <h2 class="success-title">
                        She said <span class="yes-highlight">Yes!</span> üíï
                    </h2>
                    <p class="success-subtitle">
                        Under the stars, our story begins...<br>
                        Happy Valentine's Day, Ayathma üíñ<br>
                        From your forever Valentine, <span class="italic-text">Sanuga</span>
                    </p>
                </div>
            </div>
        </div>
    </section>

    <script>
        // ====================================
        // SCENE MANAGEMENT & INITIALIZATION
        // ====================================
        
        let currentScene = 'heart-journey';
        const scenes = {
            'heart-journey': document.getElementById('heart-journey-scene'),
            'question': document.getElementById('question-scene'),
            'reveal': document.getElementById('reveal-scene')
        };

        // Generate Star Field
        function generateStars(container, count) {
            for (let i = 0; i < count; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.width = star.style.height = (Math.random() * 3 + 1) + 'px';
                star.style.animationDelay = Math.random() * 3 + 's';
                star.style.animationDuration = (Math.random() * 2 + 2) + 's';
                container.appendChild(star);
            }
        }

        // Initialize stars for all scenes
        document.querySelectorAll('.star-field').forEach(field => {
            generateStars(field, 100);
        });

        // ====================================
        // SCENE 1: HEART JOURNEY ANIMATION
        // ====================================
        
        function startHeartJourney() {
            const container = document.getElementById('floating-hearts-container');
            const numberOfHearts = 8; // Number of floating hearts
            
            // Create multiple floating hearts scattered around the screen
            for (let i = 0; i < numberOfHearts; i++) {
                const heartDiv = document.createElement('div');
                heartDiv.className = 'floating-heart';
                
                // Random position across the screen
                const randomX = Math.random() * window.innerWidth;
                const randomY = Math.random() * window.innerHeight;
                
                // Random size variation
                const sizeVariation = 0.6 + Math.random() * 0.8; // 0.6 to 1.4
                
                // Create SVG heart
                const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
                svg.setAttribute('width', `${60 * sizeVariation}`);
                svg.setAttribute('height', `${60 * sizeVariation}`);
                svg.setAttribute('viewBox', '0 0 60 60');
                svg.setAttribute('class', 'heart-svg');
                
                const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                path.setAttribute('d', 'M30 52 C10 38, 4 26, 4 18 C4 8, 12 2, 20 2 C24 2, 28 4, 30 8 C32 4, 36 2, 40 2 C48 2, 56 8, 56 18 C56 26, 50 38, 30 52 Z');
                path.setAttribute('fill', '#FF6B9D');
                path.setAttribute('class', 'heart-pulse');
                
                svg.appendChild(path);
                heartDiv.appendChild(svg);
                
                // Random animation duration (3-6 seconds)
                const animationDuration = 3 + Math.random() * 3;
                const animationDelay = Math.random() * 0.5;
                
                heartDiv.style.left = randomX + 'px';
                heartDiv.style.top = randomY + 'px';
                heartDiv.style.animation = `float-random ${animationDuration}s ease-in-out infinite`;
                heartDiv.style.animationDelay = animationDelay + 's';
                
                container.appendChild(heartDiv);
            }
            
            // Transition to question scene after delay
            setTimeout(() => {
                transitionToScene('question');
            }, 5000); // 5 seconds before transitioning
        }

        function animateHeartPath(heart, points, index) {
            // This function is no longer needed but kept for compatibility
            return;
        }

        // ====================================
        // SCENE 2: QUESTION WITH BUTTON LOGIC
        // ====================================
        
        let noButtonScale = 1;
        let noButtonEscapeCount = 0;
        const maxEscapes = 8;

        const yesButton = document.getElementById('yes-button');
        const noButton = document.getElementById('no-button');

        // Yes button - Trigger confetti then transition to reveal scene
        yesButton.addEventListener('click', () => {
            // Haptic feedback for Yes button
            triggerHapticFeedback('success');
            
            yesButton.style.transform = 'scale(1.2)';
            
            // Trigger confetti burst
            createConfettiBurst();
            
            setTimeout(() => {
                transitionToScene('reveal');
            }, 500);
        });

        // No button - Cursor avoidance logic
        noButton.addEventListener('mouseenter', handleNoButtonHover);
        noButton.addEventListener('click', handleNoButtonClick);

        function handleNoButtonHover(e) {
            if (noButtonEscapeCount >= maxEscapes) return;
            
            // Haptic feedback for No button hover/escape
            triggerHapticFeedback('light');
            
            const button = e.target;
            const buttonRect = button.getBoundingClientRect();
            const buttonCenterX = buttonRect.left + buttonRect.width / 2;
            const buttonCenterY = buttonRect.top + buttonRect.height / 2;
            
            // Calculate escape direction (away from cursor)
            const mouseX = e.clientX;
            const mouseY = e.clientY;
            const deltaX = buttonCenterX - mouseX;
            const deltaY = buttonCenterY - mouseY;
            
            // Normalize and amplify
            const distance = Math.sqrt(deltaX * deltaX + deltaY * deltaY);
            const escapeX = (deltaX / distance) * 150;
            const escapeY = (deltaY / distance) * 150;
            
            // Ensure button stays on screen
            let newX = buttonCenterX + escapeX;
            let newY = buttonCenterY + escapeY;
            
            newX = Math.max(100, Math.min(window.innerWidth - 100, newX));
            newY = Math.max(200, Math.min(window.innerHeight - 200, newY));
            
            // Apply transform
            button.style.position = 'fixed';
            button.style.left = newX + 'px';
            button.style.top = newY + 'px';
            button.style.transform = `translate(-50%, -50%) scale(${noButtonScale})`;
            button.style.transition = 'all 0.3s cubic-bezier(0.16, 1, 0.3, 1)';
            
            // Shrink button progressively
            noButtonEscapeCount++;
            noButtonScale = Math.max(0.3, 1 - (noButtonEscapeCount / maxEscapes) * 0.7);
            
            // After max escapes, disappear into star
            if (noButtonEscapeCount >= maxEscapes) {
                setTimeout(() => {
                    button.style.transform = 'translate(-50%, -50%) scale(0)';
                    button.style.opacity = '0';
                    
                    // Create star at button position
                    createDisappearingStar(newX, newY);
                    
                    // Show hint text
                    document.querySelector('.hint-text').textContent = 'Looks like "Yes" is your only option now... üòäüíï';
                }, 300);
            }
        }

        function handleNoButtonClick(e) {
            e.preventDefault();
            // Haptic feedback on click attempt
            triggerHapticFeedback('medium');
            // Button moves away before click registers
            handleNoButtonHover(e);
        }

        function createDisappearingStar(x, y) {
            const star = document.createElement('div');
            star.className = 'disappearing-star';
            star.innerHTML = `
                <svg width="40" height="40" viewBox="0 0 40 40">
                    <path d="M20 0 L24 14 L40 14 L28 22 L32 36 L20 28 L8 36 L12 22 L0 14 L16 14 Z" 
                          fill="#FFD93D"/>
                </svg>
            `;
            star.style.left = x + 'px';
            star.style.top = y + 'px';
            document.body.appendChild(star);
            
            setTimeout(() => {
                star.style.opacity = '1';
                star.style.transform = 'translate(-50%, -50%) scale(1)';
            }, 50);
            
            setTimeout(() => {
                star.style.opacity = '0';
                star.style.transform = 'translate(-50%, -50%) scale(0.3)';
            }, 1000);
            
            setTimeout(() => {
                star.remove();
            }, 1500);
        }

        // ====================================
        // HAPTIC FEEDBACK FOR MOBILE
        // ====================================
        
        function triggerHapticFeedback(type = 'light') {
            // Check if Vibration API is supported
            if (!navigator.vibrate) return;
            
            // Different vibration patterns for different interactions
            const patterns = {
                'light': 10,           // Quick tap for hover/touch
                'medium': 20,          // Medium tap for button escape
                'success': [30, 50, 30], // Success pattern for Yes button
                'swipe': 15            // Light feedback for swipe
            };
            
            const pattern = patterns[type] || patterns.light;
            navigator.vibrate(pattern);
        }

        // ====================================
        // SWIPE GESTURE DETECTION FOR MOBILE
        // ====================================
        
        let touchStartX = 0;
        let touchStartY = 0;
        let touchEndX = 0;
        let touchEndY = 0;
        const minSwipeDistance = 50; // Minimum distance for swipe detection
        
        // Add touch event listeners for swipe gestures
        document.addEventListener('touchstart', handleTouchStart, { passive: true });
        document.addEventListener('touchend', handleTouchEnd, { passive: true });
        
        function handleTouchStart(e) {
            touchStartX = e.changedTouches[0].screenX;
            touchStartY = e.changedTouches[0].screenY;
        }
        
        function handleTouchEnd(e) {
            touchEndX = e.changedTouches[0].screenX;
            touchEndY = e.changedTouches[0].screenY;
            handleSwipeGesture();
        }
        
        function handleSwipeGesture() {
            const deltaX = touchEndX - touchStartX;
            const deltaY = touchEndY - touchStartY;
            const absDeltaX = Math.abs(deltaX);
            const absDeltaY = Math.abs(deltaY);
            
            // Only process if swipe distance is significant
            if (absDeltaX < minSwipeDistance && absDeltaY < minSwipeDistance) return;
            
            // Determine swipe direction
            if (absDeltaX > absDeltaY) {
                // Horizontal swipe
                if (deltaX > 0) {
                    handleSwipeRight();
                } else {
                    handleSwipeLeft();
                }
            } else {
                // Vertical swipe
                if (deltaY > 0) {
                    handleSwipeDown();
                } else {
                    handleSwipeUp();
                }
            }
        }
        
        function handleSwipeRight() {
            triggerHapticFeedback('swipe');
            // Swipe right on question scene = trigger Yes
            if (currentScene === 'question') {
                yesButton.click();
            }
        }
        
        function handleSwipeLeft() {
            triggerHapticFeedback('swipe');
            // Swipe left on question scene = attempt No (button will escape)
            if (currentScene === 'question' && noButtonEscapeCount < maxEscapes) {
                const event = new MouseEvent('mouseenter', {
                    bubbles: true,
                    cancelable: true,
                    clientX: touchEndX,
                    clientY: touchEndY
                });
                noButton.dispatchEvent(event);
            }
        }
        
        function handleSwipeUp() {
            triggerHapticFeedback('swipe');
            // Swipe up can trigger confetti burst on reveal scene
            if (currentScene === 'reveal') {
                createConfettiBurst();
            }
        }
        
        function handleSwipeDown() {
            triggerHapticFeedback('swipe');
            // Reserved for future interactions
        }

        // ====================================
        // CONFETTI BURST ANIMATION (TOUCH-OPTIMIZED)
        // ====================================
        
        function createConfettiBurst() {
            // Detect if mobile device for optimized particle count
            const isMobile = window.innerWidth <= 768;
            const particleCount = isMobile ? 30 : 50; // Fewer particles on mobile for performance
            const colors = ['#FF6B9D', '#FFD93D', '#FF6B35', '#FFF5E1', '#E91E63'];
            
            for (let i = 0; i < particleCount; i++) {
                setTimeout(() => {
                    createConfettiParticle(colors, isMobile);
                }, i * 30);
            }
        }
        
        function createConfettiParticle(colors, isMobile = false) {
            const particle = document.createElement('div');
            particle.className = 'confetti-particle';
            
            // Randomly choose heart or star
            const isHeart = Math.random() > 0.5;
            const color = colors[Math.floor(Math.random() * colors.length)];
            // Larger particles for mobile (easier to see and touch-friendly)
            const baseSize = isMobile ? 35 : 20;
            const size = Math.random() * 25 + baseSize;
            
            if (isHeart) {
                particle.innerHTML = `
                    <svg width="${size}" height="${size}" viewBox="0 0 60 60">
                        <path d="M30 52 C10 38, 4 26, 4 18 C4 8, 12 2, 20 2 C24 2, 28 4, 30 8 C32 4, 36 2, 40 2 C48 2, 56 8, 56 18 C56 26, 50 38, 30 52 Z" 
                              fill="${color}"/>
                    </svg>
                `;
            } else {
                particle.innerHTML = `
                    <svg width="${size}" height="${size}" viewBox="0 0 40 40">
                        <path d="M20 0 L24 14 L40 14 L28 22 L32 36 L20 28 L8 36 L12 22 L0 14 L16 14 Z" 
                              fill="${color}"/>
                    </svg>
                `;
            }
            
            // Random starting position (top of screen, spread across width)
            const startX = Math.random() * window.innerWidth;
            particle.style.left = startX + 'px';
            particle.style.top = '-50px';
            
            // Add sway animation randomly
            const swayType = Math.random();
            if (swayType < 0.33) {
                particle.classList.add('sway-left');
            } else if (swayType < 0.66) {
                particle.classList.add('sway-right');
            }
            
            // Optimized animation duration for mobile (slightly faster)
            const duration = isMobile ? (Math.random() * 1.5 + 2) : (Math.random() * 2 + 2);
            particle.style.animationDuration = duration + 's';
            particle.style.animationDelay = (Math.random() * 0.5) + 's';
            
            // Use CSS transform for better mobile performance
            particle.style.willChange = 'transform, opacity';
            
            document.body.appendChild(particle);
            
            // Remove particle after animation completes
            setTimeout(() => {
                particle.remove();
            }, (duration + 0.5) * 1000);
        }

        // ====================================
        // SCENE 3: REVEAL ANIMATION
        // ====================================
        
        function startRevealAnimation() {
            const revealScene = scenes['reveal'];
            const skyPortion = revealScene.querySelector('.sky-portion');
            const groundPortion = revealScene.querySelector('.ground-portion');
            
            // Initial state: sky fills screen, ground below
            skyPortion.style.transform = 'translateY(0)';
            groundPortion.style.transform = 'translateY(100vh)';
            groundPortion.style.opacity = '0';
            
            // Camera pan down effect
            setTimeout(() => {
                skyPortion.style.transition = 'transform 3s cubic-bezier(0.16, 1, 0.3, 1)';
                groundPortion.style.transition = 'all 3s cubic-bezier(0.16, 1, 0.3, 1)';
                
                skyPortion.style.transform = 'translateY(-70vh)';
                groundPortion.style.transform = 'translateY(0)';
                groundPortion.style.opacity = '1';
            }, 500);
            
            // Show success message
            setTimeout(() => {
                const message = revealScene.querySelector('.success-message');
                message.style.opacity = '1';
                message.style.transform = 'translateY(0)';
            }, 2500);
        }

        // ====================================
        // SCENE TRANSITION SYSTEM
        // ====================================
        
        function transitionToScene(sceneName) {
            // Fade out current scene
            scenes[currentScene].classList.remove('active');
            scenes[currentScene].classList.add('fade-out');
            
            setTimeout(() => {
                scenes[currentScene].classList.remove('fade-out');
                scenes[currentScene].style.display = 'none';
                
                // Fade in new scene
                scenes[sceneName].style.display = 'flex';
                setTimeout(() => {
                    scenes[sceneName].classList.add('active');
                    currentScene = sceneName;
                    
                    // Trigger scene-specific animations
                    if (sceneName === 'reveal') {
                        startRevealAnimation();
                    }
                }, 50);
            }, 500);
        }

        // ====================================
        // INITIALIZE ON LOAD
        // ====================================
        
        window.addEventListener('load', () => {
            // Hide non-initial scenes
            scenes['question'].style.display = 'none';
            scenes['reveal'].style.display = 'none';
            
            // Start heart journey after brief delay
            setTimeout(() => {
                startHeartJourney();
            }, 1000);
        });

        // Prevent accidental page refresh
        window.addEventListener('beforeunload', (e) => {
            if (currentScene !== 'reveal') {
                e.preventDefault();
                e.returnValue = '';
            }
        });

        // ====================================
        // AUDIO CONTROLS
        // ====================================
        
        const audio = document.getElementById('background-music');
        const muteToggle = document.getElementById('mute-toggle');
        const volumeSlider = document.getElementById('volume-slider');
        const volumePercentage = document.getElementById('volume-percentage');
        const volumeIcon = document.getElementById('volume-icon');
        
        let isMuted = false;
        let previousVolume = 0.5;
        
        // Set initial volume
        audio.volume = 0.5;
        
        // Auto-play music when page loads (with user interaction fallback)
        window.addEventListener('load', () => {
            // Try to autoplay
            const playPromise = audio.play();
            
            if (playPromise !== undefined) {
                playPromise.catch(error => {
                    // Autoplay was prevented, wait for user interaction
                    console.log('Autoplay prevented, waiting for user interaction');
                    document.body.addEventListener('click', () => {
                        audio.play();
                    }, { once: true });
                });
            }
        });
        
        // Mute/Unmute toggle
        muteToggle.addEventListener('click', () => {
            isMuted = !isMuted;
            
            if (isMuted) {
                previousVolume = audio.volume;
                audio.volume = 0;
                volumeSlider.value = 0;
                volumePercentage.textContent = '0%';
                updateVolumeIcon(0);
            } else {
                audio.volume = previousVolume;
                volumeSlider.value = previousVolume * 100;
                volumePercentage.textContent = Math.round(previousVolume * 100) + '%';
                updateVolumeIcon(previousVolume);
            }
        });
        
        // Volume slider control
        volumeSlider.addEventListener('input', (e) => {
            const volume = e.target.value / 100;
            audio.volume = volume;
            volumePercentage.textContent = e.target.value + '%';
            updateVolumeIcon(volume);
            
            // If user adjusts volume from 0, unmute
            if (volume > 0 && isMuted) {
                isMuted = false;
            }
            
            // If user sets volume to 0, consider it muted
            if (volume === 0) {
                isMuted = true;
            }
            
            previousVolume = volume > 0 ? volume : previousVolume;
        });
        
        // Update volume icon based on volume level
        function updateVolumeIcon(volume) {
            if (volume === 0) {
                // Muted icon
                volumeIcon.innerHTML = '<path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"/>';
            } else if (volume < 0.5) {
                // Low volume icon
                volumeIcon.innerHTML = '<path d="M7 9v6h4l5 5V4l-5 5H7z"/>';
            } else {
                // High volume icon
                volumeIcon.innerHTML = '<path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>';
            }
        }
    </script>
<script id="dhws-dataInjector" src="/public/dhws-data-injector.js"></script>
</body>
</html>